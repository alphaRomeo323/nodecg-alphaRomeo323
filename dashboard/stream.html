<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Stream descriptionrmation</title>
    <style>
        button {
		font-size: large;
	    }
    </style>
</head>
<body>
    <section>
        <label for="title">Title</label>
        <input type="text" id="title" name="title" size="40">
    </section>
    <section>
        <label for="description">Description</label><br>
        <textarea name="description" id="description" cols="40" rows="3"></textarea>
    </section>
    <section>
        <lavel for="startTime">Start & End Time</lavel><br>
        <input type="time" id="startTime"> ~ <input type="time" id="endTime">
    </section>
    <section>
	    <button id="apply">Apply</button>
        <button id="lock"><span id="is-lock"></span></button>
    </section>
</body>
<script>
    const isLock = document.getElementById("is-lock");
    const titleElm = document.getElementById("title");
    const descriptionElm = document.getElementById("description");
    const startElm = document.getElementById("startTime");
    const endElm = document.getElementById("endTime");
    const lockRep = nodecg.Replicant("lock");
    const titleRep = nodecg.Replicant("title");
    const descriptionRep = nodecg.Replicant("description");
    const startRep = nodecg.Replicant("start-time");
    const endRep = nodecg.Replicant("end-time");
    const stream = nodecg.Replicant("stream");
    let flag = 0;
	document.getElementById("lock").onclick = () => {
        if(lockRep.value == "lock"){
            lockRep.value = "unlock";
        }
        else{
        lockRep.value = "lock";
        }
	};
    lockRep.on("change", (newValue) => {
        if(lockRep.value == "lock"){
            isLock.innerText = "Unlock";
            titleElm.disabled = true;
            descriptionElm.disabled = true;
            startElm.disabled = true;
            endElm.disabled = true;
        }
        else{
            isLock.innerText = "Lock";
            titleElm.disabled = false;
            descriptionElm.disabled = false;
            startElm.disabled = false;
            endElm.disabled = false;
        }
    });
    document.getElementById("apply").onclick = () =>
    {
        titleRep.value = titleElm.value;
        descriptionRep.value = descriptionElm.value;
        startRep.value = startElm.value;
        endRep.value = endElm.value;
    }
    nodecg.Replicant("end-time").on("change", (newValue) => {
        if(flag == 0){
            titleElm.value = titleRep.value
            descriptionElm.value = descriptionRep.value
            startElm.value = startRep.value
            endElm.value = endRep.value
            flag = 1;
        }
    });
    






</script>