<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Stream descriptionrmation</title>
    <style>
        button {
		font-size: large;
	    }
    </style>
</head>
<body>
    <section>
        <label for="title">Title</label>
        <input type="text" id="title" name="title" size="40">
    </section>
    <section>
        <label for="description">Description</label><br>
        <textarea name="description" id="description" cols="40" rows="3"></textarea>
    </section>
    <section>
        <lavel for="startTime">Start & End Time</lavel><br>
        <input type="time" id="startTime"> ~ <input type="time" id="endTime">
    </section>
    <section>
	    <button id="apply">Apply</button>
    </section>
</body>
<script>
    const titleElm = document.getElementById("title");
    const descriptionElm = document.getElementById("description");
    const startElm = document.getElementById("startTime");
    const endElm = document.getElementById("endTime");
    const titleRep = nodecg.Replicant("title");
    const descriptionRep = nodecg.Replicant("description");
    const startRep = nodecg.Replicant("start-time");
    const endRep = nodecg.Replicant("end-time");
    const stream = nodecg.Replicant("stream");
    const lockRep = nodecg.Replicant("lock")
    
    NodeCG.waitForReplicants(titleRep,descriptionRep,startRep,endRep,lockRep).then(() => {
        lockRep.on("change", (newValue) => {
            titleElm.disabled = newValue;
            descriptionElm.disabled = newValue;
            startElm.disabled = newValue;
            endElm.disabled = newValue;
        });
        document.getElementById("apply").onclick = () =>{
            titleRep.value = titleElm.value;
            descriptionRep.value = descriptionElm.value;
            startRep.value = startElm.value;
            endRep.value = endElm.value;
        };
        titleRep.on("change",newValue => {
            titleElm.value = titleRep.value;
        });
        descriptionRep.on("change", newValue => {
            descriptionElm.value = descriptionRep.value;
        });
        startRep.on("change", newValue => {
            startElm.value = startRep.value;
        })
        endRep.on("change", newValue => {
            endElm.value = endRep.value;
        })
    });
</script>